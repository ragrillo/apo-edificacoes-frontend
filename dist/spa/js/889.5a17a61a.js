"use strict";(globalThis["webpackChunkapo_edificacoes_client"]=globalThis["webpackChunkapo_edificacoes_client"]||[]).push([[889],{4889:(i,a,o)=>{o.r(a),o.d(a,{default:()=>D});o(9665);var e=o(9835);function t(i,a,o,t,r,s){const l=(0,e.up)("q-linear-progress"),n=(0,e.up)("QuestionarioComponent"),c=(0,e.up)("q-list"),u=(0,e.up)("q-card-section"),d=(0,e.up)("q-separator"),m=(0,e.up)("q-btn"),p=(0,e.up)("q-card-actions"),g=(0,e.up)("q-card");return(0,e.wg)(),(0,e.j4)(g,{class:"q-ma-lg"},{default:(0,e.w5)((()=>[r.isCardLoading?((0,e.wg)(),(0,e.j4)(l,{key:0,indeterminate:"",color:"primary"})):((0,e.wg)(),(0,e.j4)(u,{key:1},{default:(0,e.w5)((()=>[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(s.filtrarQuestionario(),(i=>((0,e.wg)(),(0,e.j4)(c,{key:i.codigo},{default:(0,e.w5)((()=>[(0,e.Wm)(n,{criterio:i,onResposta:s.registrarResposta},null,8,["criterio","onResposta"])])),_:2},1024)))),128))])),_:1})),(0,e.Wm)(d),(0,e.Wm)(p,{class:"justify-between"},{default:(0,e.w5)((()=>[(0,e.Wm)(m,{flat:"",color:"primary",label:"Fechar",onClick:a[0]||(a[0]=a=>i.$router.push("/ambiente"))}),(0,e._)("div",null,[(0,e.Wm)(m,{flat:"",color:"primary",label:"Anterior",onClick:a[1]||(a[1]=i=>s.irParaCriterioAnterior())}),(0,e.Wm)(m,{flat:"",color:"primary",label:"Próximo",onClick:a[2]||(a[2]=i=>s.irParaProximoCriterio())}),(0,e.Wm)(m,{flat:"",color:"primary",label:r.hasSaved?"Concluído":"Salvar",loading:r.isButtonLoading,disable:!s.isFormularioCheio()||r.hasSaved,onClick:a[3]||(a[3]=i=>s.enviarRespostas())},null,8,["label","loading","disable"])])])),_:1})])),_:1})}o(6727);var r=o(4136),s=o(6970);const l={class:"text-bold q-mb-lg"},n={class:"text-justify"};function c(i,a,o,t,r,c){const u=(0,e.up)("q-item-label"),d=(0,e.up)("q-btn"),m=(0,e.up)("q-radio"),p=(0,e.up)("q-item-section"),g=(0,e.up)("q-item"),h=(0,e.up)("q-card-section"),f=(0,e.up)("q-card-actions"),b=(0,e.up)("q-card"),w=(0,e.up)("q-dialog");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(g,null,{default:(0,e.w5)((()=>[(0,e.Wm)(p,null,{default:(0,e.w5)((()=>[(0,e.Wm)(u,{caption:""},{default:(0,e.w5)((()=>[(0,e.Uk)((0,s.zw)(o.criterio.categoria),1)])),_:1}),(0,e.Wm)(u,{class:"q-mb-sm"},{default:(0,e.w5)((()=>[o.criterio.dica?((0,e.wg)(),(0,e.j4)(d,{key:0,flat:"",rounded:"",dense:"",icon:"info",size:"sm",color:"primary",onClick:a[0]||(a[0]=i=>c.habilitarDica(o.criterio))})):(0,e.kq)("",!0),(0,e.Uk)(" "+(0,s.zw)(o.criterio.enunciado),1)])),_:1}),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(o.criterio.opcoesResposta,((i,t)=>((0,e.wg)(),(0,e.iD)("div",{key:t},[(0,e.Wm)(m,{modelValue:r.resposta,"onUpdate:modelValue":[a[1]||(a[1]=i=>r.resposta=i),a[2]||(a[2]=i=>c.enviarResposta(o.criterio))],label:i,val:i},null,8,["modelValue","label","val"])])))),128))])),_:1})])),_:1}),(0,e.Wm)(w,{modelValue:r.dica.visivel,"onUpdate:modelValue":a[3]||(a[3]=i=>r.dica.visivel=i)},{default:(0,e.w5)((()=>[(0,e.Wm)(b,{style:{width:"100%"}},{default:(0,e.w5)((()=>[(0,e.Wm)(h,null,{default:(0,e.w5)((()=>[(0,e._)("div",l,(0,s.zw)(r.dica.titulo),1),(0,e._)("div",n,(0,s.zw)(r.dica.descricao),1)])),_:1}),(0,e.Wm)(f,{align:"right"},{default:(0,e.w5)((()=>[(0,e.Wm)(d,{flat:"",color:"primary",label:"Fechar",onClick:c.desabilitarDica},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}const u={visivel:!1,titulo:"",descricao:""},d={emits:["resposta"],props:{criterio:{type:Object,required:!0}},data(){return{dica:u,resposta:""}},methods:{habilitarDica(i){this.dica.visivel=!0,this.dica.titulo=i.enunciado,this.dica.descricao=i.dica},desabilitarDica(){this.dica.visivel=!1},enviarResposta(i){const a={criterio:i.codigo,resposta:this.resposta};this.$emit("resposta",a)}}};var m=o(1639),p=o(490),g=o(1233),h=o(3115),f=o(4455),b=o(1480),w=o(7743),C=o(4458),v=o(3190),q=o(1821),_=o(9984),Q=o.n(_);const k=(0,m.Z)(d,[["render",c]]),y=k;Q()(d,"components",{QItem:p.Z,QItemSection:g.Z,QItemLabel:h.Z,QBtn:f.Z,QRadio:b.Z,QDialog:w.Z,QCard:C.Z,QCardSection:v.Z,QCardActions:q.Z});const Z={data(){return{formulario:[],questionario:[],isCardLoading:!0,isButtonLoading:!1,hasSaved:!1}},components:{QuestionarioComponent:y},created(){const{numero:i}=this.$route.params;this.getCriterios(i)},methods:{isCriterio(i){const{numero:a}=this.$route.params;return Number(a)===i},isFormularioCheio(){return this.formulario.length===this.filtrarQuestionario().length},async irParaProximoCriterio(){},irParaCriterioAnterior(){},filtrarQuestionario(){const i=localStorage.getItem("apo@usuario_edificacao"),a=localStorage.getItem("apo@usuario_cargo");return this.questionario.filter((o=>o.edificacoes.includes(i)&&o.cargos.includes(a)))},registrarResposta(i){const a=this.formulario.findIndex((a=>a.criterio===i.criterio));-1===a?this.formulario.push(i):this.formulario[a]=i},async enviarRespostas(){this.isButtonLoading=!0;const i=localStorage.getItem("apo@ambiente_id"),a={ambiente:i,respostas:this.formulario},o="/formularios";await r.api.post(o,a),this.formulario=[],this.hasSaved=!0,this.isButtonLoading=!1},async getCriterios(i){const a=`/criterios/${i}`,{data:o}=await r.api.get(a);this.questionario=o,this.isCardLoading=!1}}};var W=o(8289),S=o(3246),L=o(926);const R=(0,m.Z)(Z,[["render",t]]),D=R;Q()(Z,"components",{QCard:C.Z,QLinearProgress:W.Z,QCardSection:v.Z,QList:S.Z,QSeparator:L.Z,QCardActions:q.Z,QBtn:f.Z})}}]);