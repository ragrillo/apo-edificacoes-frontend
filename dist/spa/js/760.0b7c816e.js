"use strict";(globalThis["webpackChunkapo_edificacoes_client"]=globalThis["webpackChunkapo_edificacoes_client"]||[]).push([[760],{7374:(e,a,n)=>{n.d(a,{Z:()=>p});var t=n(9835);function s(e,a,n,s,i,o){const r=(0,t.up)("q-btn"),l=(0,t.up)("q-input");return(0,t.wg)(),(0,t.j4)(l,{modelValue:i.senha,"onUpdate:modelValue":a[0]||(a[0]=e=>i.senha=e),filled:"",label:n.label,type:o.alterarTipo,onKeyup:o.obterSenha},{append:(0,t.w5)((()=>[(0,t.Wm)(r,{dense:"",rounded:"",flat:"",onClick:o.mostrarSenha,icon:o.alterarIcone,color:"grey-6"},null,8,["onClick","icon"])])),_:1},8,["modelValue","label","type","onKeyup"])}const i={props:{label:{type:String,default:"Senha"}},data(){return{senha:"",icone:"visibility",isVisible:!1}},methods:{mostrarSenha(){this.isVisible=!this.isVisible},obterSenha(){this.$emit("senha",this.senha)}},computed:{alterarTipo(){return this.isVisible?"text":"password"},alterarIcone(){return this.isVisible?"visibility_off":"visibility"}}};var o=n(1639),r=n(6611),l=n(4455),u=n(9984),c=n.n(u);const m=(0,o.Z)(i,[["render",s]]),p=m;c()(i,"components",{QInput:r.Z,QBtn:l.Z})},6234:(e,a,n)=>{n.d(a,{Z:()=>p});var t=n(9835),s=n(6970);function i(e,a,n,i,o,r){const l=(0,t.up)("q-banner");return(0,t.wg)(),(0,t.j4)(l,{class:(0,s.C_)("q-mt-sm text-white bg-"+("error"===n.type?"red":"green"))},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(n.message),1)])),_:1},8,["class"])}const o={props:{message:{type:String,required:!0},type:{type:String,default:"info"}}};var r=n(1639),l=n(7128),u=n(9984),c=n.n(u);const m=(0,r.Z)(o,[["render",i]]),p=m;c()(o,"components",{QBanner:l.Z})},9760:(e,a,n)=>{n.r(a),n.d(a,{default:()=>S});var t=n(9835);const s={id:"content",class:"q-gutter-y-md"},i={class:"column q-gutter-y-sm"},o=(0,t._)("span",null,"Ainda não possui conta? ",-1);function r(e,a,n,r,l,u){const c=(0,t.up)("q-input"),m=(0,t.up)("q-input-senha"),p=(0,t.up)("router-link"),d=(0,t.up)("q-form"),h=(0,t.up)("q-btn"),g=(0,t.up)("q-message"),b=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(b,{class:"flex flex-center justify-center"},{default:(0,t.w5)((()=>[(0,t._)("div",s,[(0,t.Wm)(d,{class:"q-gutter-y-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:l.email,"onUpdate:modelValue":a[0]||(a[0]=e=>l.email=e),filled:"",type:"email",label:"E-mail"},null,8,["modelValue"]),(0,t.Wm)(m,{onSenha:u.obterSenha},null,8,["onSenha"]),(0,t._)("div",null,[(0,t.Wm)(p,{to:"/recuperar"},{default:(0,t.w5)((()=>[(0,t.Uk)("Esqueci minha senha")])),_:1})])])),_:1}),(0,t._)("div",i,[(0,t.Wm)(h,{unelevated:"",label:"Entrar",color:"primary",loading:l.isLoading,onClick:a[1]||(a[1]=e=>u.realizarLogin())},null,8,["loading"]),(0,t.Wm)(h,{outline:"",label:"Entrar como Usuário Anônimo",color:"primary",disable:""})]),(0,t._)("div",null,[o,(0,t.Wm)(p,{to:"/cadastro/usuario"},{default:(0,t.w5)((()=>[(0,t.Uk)("Cadastre-se!")])),_:1})]),l.mensagem?((0,t.wg)(),(0,t.j4)(g,{key:0,type:"error",message:l.mensagem},null,8,["message"])):(0,t.kq)("",!0)])])),_:1})}n(9665);var l=n(4136),u=n(7374),c=n(6234);const m={data(){return{email:"",senha:"",mensagem:"",isLoading:!1}},components:{QInputSenha:u.Z,QMessage:c.Z},methods:{realizarLogin(){this.mensagem="",this.isLoading=!0;const e="/usuarios/login",a={email:this.email.trim(),senha:this.senha.trim()};l.api.post(e,a).then((({data:e})=>{this.iniciarSessao(e)})).catch((({response:e})=>{this.mensagem=e.data})).finally((()=>{this.isLoading=!1}))},iniciarSessao(e){const{token:a,usuario:n}=e,{id:t,cargo:s,edificacao:i}=n;localStorage.setItem("apo@usuario_session",a),localStorage.setItem("apo@usuario_id",t),localStorage.setItem("apo@usuario_cargo",s),localStorage.setItem("apo@usuario_edificacao",i),this.$router.push(5===s?"/admin":"/perfil")},obterSenha(e){this.senha=e}}};var p=n(1639),d=n(9885),h=n(8326),g=n(6611),b=n(4455),f=n(9984),y=n.n(f);const _=(0,p.Z)(m,[["render",r]]),S=_;y()(m,"components",{QPage:d.Z,QForm:h.Z,QInput:g.Z,QBtn:b.Z})}}]);